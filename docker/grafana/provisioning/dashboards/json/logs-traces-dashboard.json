{
    "annotations": {
        "list": [
            {
                "builtIn": 1,
                "datasource": {
                    "type": "grafana",
                    "uid": "-- Grafana --"
                },
                "enable": true,
                "hide": true,
                "iconColor": "rgba(0, 211, 255, 1)",
                "name": "Annotations & Alerts",
                "type": "dashboard"
            }
        ]
    },
    "editable": true,
    "fiscalYearStartMonth": 0,
    "graphTooltip": 0,
    "id": 3,
    "links": [],
    "panels": [
        {
            "datasource": {
                "type": "loki",
                "uid": "Loki"
            },
            "fieldConfig": {
                "defaults": {
                    "links": [
                        {
                            "title": "View Trace",
                            "url": "/d/logs-traces/logs-traces?var-traceid=${__field.labels.traceid}",
                            "targetBlank": false
                        }
                    ]
                },
                "overrides": []
            },
            "gridPos": {
                "h": 22,
                "w": 12,
                "x": 0,
                "y": 0
            },
            "id": 1,
            "options": {
                "dedupStrategy": "none",
                "enableInfiniteScrolling": false,
                "enableLogDetails": true,
                "prettifyLogMessage": false,
                "showCommonLabels": false,
                "showLabels": false,
                "showTime": false,
                "sortOrder": "Descending",
                "wrapLogMessage": false
            },
            "pluginVersion": "12.2.0",
            "targets": [
                {
                    "direction": "backward",
                    "editorMode": "builder",
                    "expr": "{service_name=\"valorizeai\"} | traceid =~ `$traceid`",
                    "queryType": "range",
                    "refId": "A"
                }
            ],
            "title": "Logs (filtered by traceid)",
            "type": "logs"
        },
        {
            "datasource": {
                "type": "tempo",
                "uid": "Tempo"
            },
            "fieldConfig": {
                "defaults": {},
                "overrides": []
            },
            "gridPos": {
                "h": 22,
                "w": 12,
                "x": 12,
                "y": 0
            },
            "id": 2,
            "options": {
                "showHeader": true,
                "spanFilters": {
                    "criticalPathOnly": false,
                    "matchesOnly": false,
                    "serviceNameOperator": "=",
                    "spanNameOperator": "="
                }
            },
            "pluginVersion": "12.2.0",
            "targets": [
                {
                    "query": "$traceid",
                    "refId": "A"
                }
            ],
            "title": "Trace View (by ID)",
            "type": "traces"
        },
        {
            "datasource": {
                "type": "tempo",
                "uid": "Tempo"
            },
            "fieldConfig": {
                "defaults": {},
                "overrides": []
            },
            "gridPos": {
                "h": 10,
                "w": 12,
                "x": 0,
                "y": 22
            },
            "id": 3,
            "options": {
                "spanFilters": {
                    "criticalPathOnly": false,
                    "matchesOnly": false,
                    "serviceNameOperator": "=",
                    "spanNameOperator": "="
                }
            },
            "pluginVersion": "12.2.0",
            "targets": [
                {
                    "query": "{service.name=*}",
                    "refId": "A"
                }
            ],
            "title": "Recent Traces (by Service)",
            "type": "traces"
        },
        {
            "collapsed": false,
            "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 51
            },
            "id": 29,
            "panels": [],
            "title": "Traces",
            "type": "row"
        },
        {
            "datasource": {
                "type": "tempo",
                "uid": "Tempo"
            },
            "description": "Traces containing a span emitted by the service",
            "fieldConfig": {
                "defaults": {
                    "color": {
                        "mode": "thresholds"
                    },
                    "custom": {
                        "align": "auto",
                        "cellOptions": {
                            "type": "auto"
                        },
                        "inspect": false
                    },
                    "mappings": [],
                    "noValue": "No traces",
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "green",
                                "value": 0
                            },
                            {
                                "color": "red",
                                "value": 80
                            }
                        ]
                    }
                },
                "overrides": [
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "Trace Service"
                        },
                        "properties": [
                            {
                                "id": "custom.hidden",
                                "value": true
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "Span ID"
                        },
                        "properties": [
                            {
                                "id": "custom.hidden",
                                "value": false
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "deployment.environment.name"
                        },
                        "properties": [
                            {
                                "id": "custom.hidden",
                                "value": true
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "service.name"
                        },
                        "properties": [
                            {
                                "id": "custom.hidden",
                                "value": true
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "service.namespace"
                        },
                        "properties": [
                            {
                                "id": "custom.hidden",
                                "value": true
                            }
                        ]
                    }
                ]
            },
            "gridPos": {
                "h": 8,
                "w": 15,
                "x": 0,
                "y": 52
            },
            "id": 30,
            "options": {
                "cellHeight": "sm",
                "footer": {
                    "countRows": false,
                    "fields": "",
                    "reducer": ["sum"],
                    "show": false
                },
                "frameIndex": 0,
                "showHeader": true
            },
            "pluginVersion": "12.1.0-91094",
            "targets": [
                {
                    "datasource": {
                        "type": "tempo",
                        "uid": "Tempo"
                    },
                    "filters": [
                        {
                            "id": "service-name",
                            "operator": "=",
                            "scope": "resource",
                            "tag": "service.name",
                            "value": ["$service_name"],
                            "valueType": "string"
                        },
                        {
                            "id": "6997e808",
                            "operator": "=",
                            "scope": "resource",
                            "tag": "deployment.environment.name",
                            "value": ["$deployment_environment_name"],
                            "valueType": "string"
                        },
                        {
                            "id": "e9f0e855",
                            "operator": "=",
                            "scope": "resource",
                            "tag": "service.namespace",
                            "value": ["$service_namespace"],
                            "valueType": "string"
                        }
                    ],
                    "limit": 20,
                    "metricsQueryType": "range",
                    "query": "{resource.service.name=\"$service_name\"} | select(status)",
                    "queryType": "traceql",
                    "refId": "A",
                    "tableType": "spans"
                }
            ],
            "type": "table"
        }
    ],
    "preload": false,
    "refresh": "30s",
    "schemaVersion": 42,
    "tags": ["observability"],
    "templating": {
        "list": [
            {
                "label": "Trace ID",
                "name": "traceid",
                "query": "",
                "type": "textbox"
            },
            {
                "current": {},
                "datasource": {
                    "type": "prometheus",
                    "uid": ""
                },
                "definition": "label_values(target_info{service_namespace=~\"$service_namespace\", deployment_environment_name=~\"$deployment_environment_name\"},service_name)",
                "description": "Service name.\nResource attribute `service.name` via `target_info`.",
                "label": "Name",
                "name": "service_name",
                "options": [],
                "query": {
                    "qryType": 1,
                    "query": "label_values(target_info{service_namespace=~\"$service_namespace\", deployment_environment_name=~\"$deployment_environment_name\"},service_name)",
                    "refId": "PrometheusVariableQueryEditor-VariableQuery"
                },
                "refresh": 2,
                "regex": "",
                "sort": 1,
                "type": "query"
            }
        ]
    },
    "timepicker": {},
    "timezone": "browser",
    "title": "Logs & Traces",
    "uid": "logs-traces",
    "version": 4
}
